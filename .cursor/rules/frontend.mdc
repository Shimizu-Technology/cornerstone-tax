---
description: Frontend development rules for React/Vite/Tailwind
globs:
  - "frontend/**/*.tsx"
  - "frontend/**/*.ts"
  - "frontend/**/*.css"
alwaysApply: false
---

# Frontend Rules

## Tech
- React with Vite (not Next.js or CRA)
- Tailwind CSS for styling (no CSS modules, no styled-components)
- TypeScript preferred

## Component Patterns
- Functional components with hooks only (no class components)
- Keep components small and focused
- Extract reusable UI components to `components/ui/`
- Page components go in `pages/`

## Styling
- Use Tailwind utility classes
- Mobile-first approach: start with mobile styles, add `md:` and `lg:` for larger screens
- Minimum touch targets: 44x44px (use `min-h-11 min-w-11` or `p-3` on buttons)
- Primary actions: 48x48px minimum

## Branding (Cornerstone)
- Warm/neutral palette: beige, cream, browns
- Light pink as subtle accent (not dominant)
- Professional and approachable feel

### CSS Variables (defined in index.css)
```css
--color-primary: #8B7355;      /* Warm brown */
--color-primary-dark: #6B5344; /* Darker brown */
--color-secondary: #F5F0E8;    /* Light cream */
--color-secondary-dark: #E8DFD1; /* Darker cream */
--color-accent: #F8E8E0;       /* Light pink */
```

Use with Tailwind: `bg-primary`, `text-primary-dark`, `border-secondary-dark`, etc.

## Forms
- Use controlled components
- Show validation errors inline, below the field
- Required fields clearly marked with asterisk (*)
- Large input fields on mobile
- Sticky submit button on long forms (mobile)

## Accessibility
- All interactive elements must be keyboard accessible
- Use semantic HTML (`<button>`, `<nav>`, `<main>`, etc.)
- Form inputs must have associated labels
- Sufficient color contrast

## API Calls
- Use the centralized API client at `lib/api.ts`
- All API functions return `{ data?, error?, errors? }`
- Handle loading and error states in components
- Token is automatically added via `AuthContext.getToken()`

## Authentication (Clerk)
- `AuthContext` wraps the app and provides `getToken()` for API calls
- `ProtectedRoute` component guards admin routes
- If `VITE_CLERK_PUBLISHABLE_KEY` is not set, auth is bypassed (dev mode)
- First user to sign in becomes admin automatically

## Utilities
- **`lib/dateUtils.ts`**: Use `formatDate()` and `formatDateTime()` for consistent display
  - `formatDate("2026-01-20")` → "January 20, 2026"
  - `formatDateTime("2026-01-20T10:15:00Z")` → "10:15am January 20, 2026"

## File Structure
```
frontend/src/
├── components/
│   ├── ui/           # Reusable: Button, Input, Modal, etc.
│   ├── forms/        # Form-specific components
│   └── layouts/      # Header, Footer, Sidebar, etc.
├── pages/
│   ├── public/       # Marketing pages (Home, About, Services, Contact)
│   ├── intake/       # Client intake form
│   ├── portal/       # Client portal (future)
│   └── admin/        # Employee dashboard
├── hooks/            # Custom hooks
├── lib/              # Utilities, API client
└── types/            # TypeScript types
```
